webpackJsonp([18],{SLCq:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("/oeL"),o=r("qbdv"),a=r("gOac"),s=r("XaSp"),i=r("jS2J"),l=r("bm2B"),c=r("0WLp");r.d(t,"EgresoVehiculosModule",function(){return p});var d=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},p=function(){function e(){}return e}();p=d([r.i(n.NgModule)({imports:[o.k,a.b,l.a,i.a,c.b.forRoot()],declarations:[s.a]})],p)},XaSp:function(e,t,r){"use strict";var n=r("/oeL"),o=r("Z5eX"),a=r("K28T"),s=r("5O89"),i=r("n8TV");r.d(t,"a",function(){return d});var l=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e){this.apiService=e,this.ingreso=new o.a,this.egreso=new i.a,this.closeAlert=!1,this.submittedExitoso=!1,this.submittedFallido=!1,this.submitted=!1,this.patenteREGEX=/([A-Z]{3}|[a-z]{3})[0-9]{3}|[A-Z]{2}[0-9]{3}[A-Z]{2}/,this.parque=JSON.parse(localStorage.getItem("currentParking"))}return e.prototype.ngOnInit=function(){},e.prototype.onPatenteChange=function(){var e=this;this.patenteREGEX.test(this.nroPatente)&&(this.nroPatente=this.nroPatente.toUpperCase(),this.apiService.get("ingreso/"+this.parque.idEstacionamiento+"/vehiculo/"+this.nroPatente).subscribe(function(t){e.ingreso=t}))},e.prototype.onSubmitClicked=function(e){var t=this;this.closeAlert=!1,this.submitted=!0,this.nroPatente=this.nroPatente.toUpperCase();try{this.apiService.put("ingreso/"+this.parque.idEstacionamiento+"/egresoVehiculo/"+this.nroPatente,null).subscribe(function(e){t.egreso=e,t.submittedExitoso=!0,t.submittedFallido=!1})}catch(e){this.submittedFallido=!0,this.submittedExitoso=!1}finally{this.clean(e),this.submitted=!1}},e.prototype.calcularCantHoras=function(e){var t=e.fechaIngreso.replace("-/g","/"),r=e.fechaEgreso.replace("-/g","/");return Math.ceil((new Date(r).getTime()-new Date(t).getTime())/36e5)},e.prototype.calcularTiempoEstadia=function(e){var t=e.fechaIngreso.replace("-/g","/"),r=e.fechaEgreso.replace("-/g","/"),n=new Date(r).getTime()-new Date(t).getTime(),o=n/1e3,a=o/60;o%=60;var s=a/60;return a%=60,Math.floor(s)+":"+("0"+Math.floor(a)).slice(-2)+":"+("0"+Math.floor(o)).slice(-2)},e.prototype.calcularCosto=function(e){return e*this.parque.precioPorHora},e.prototype.clean=function(e){e.form.reset()},e}();d=l([r.i(n.Component)({selector:"app-egreso-vehiculos",template:r("kNdR"),styles:[r("gr6D")],animations:[r.i(s.a)()]}),c("design:paramtypes",["function"==typeof(p=void 0!==a.a&&a.a)&&p||Object])],d);var p},gr6D:function(e,t,r){t=e.exports=r("rP7Y")(!1),t.push([e.i,".custom-modal-footer{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.custom-card-header-main{background-color:rgba(0,71,194,.75);color:#fff;font-weight:700}.custom-btn{height:5em;width:12em;font-size:1.2em;text-align:center;display:inline-block}",""]),e.exports=e.exports.toString()},jS2J:function(e,t,r){"use strict";var n=r("/oeL"),o=r("BkNc"),a=r("XaSp");r.d(t,"a",function(){return l});var s=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},i=[{path:"",component:a.a}],l=function(){function e(){}return e}();l=s([r.i(n.NgModule)({imports:[o.a.forChild(i)],exports:[o.a]})],l)},kNdR:function(e,t){e.exports='<app-page-header [heading]="\'Egreso de un Vehículo\'" [icon]="\'fa-car\'"></app-page-header>\r\n<div [@routerTransition]>\r\n    <form class="form-horizontal" #f="ngForm">\r\n        <div class="modal-body">\r\n\r\n            <ngb-alert type="success" (close)="closeAlert = true" *ngIf="submittedExitoso && !closeAlert" >\r\n                <strong>Egreso Exitoso!</strong> El egreso del vehiculo patente {{patente}} fue marcado exitosamente.\r\n            </ngb-alert>\r\n            <ngb-alert type="danger" (close)="closeAlert = true" *ngIf="submittedFallido && !closeAlert" >\r\n                <strong>Egreso Fallido!</strong> El egreso del vehiculo patente {{patente}} fallo.\r\n            </ngb-alert>\r\n\r\n            <div class="card mb-3 form-group">\r\n                <div class="card-header custom-card-header-main">Datos obligatorios</div>\r\n                <div class="card-block row">\r\n                    <label for="ingreso-patente" class="col-sm-3 required control-label text-right"><h4>Patente </h4></label>\r\n                    <div class="col-sm-6"\r\n                         [ngClass]="{\'has-danger\': !patente.valid && (!patente.pristine || patente.touched || submitted),\r\n                    \'has-success\': patente.valid}">\r\n                        <input type="text" class="form-control has-feedback" id="ingreso-patente" name="patente" [(ngModel)]="nroPatente" #patente="ngModel"\r\n                               (keyup)="onPatenteChange()" pattern="([A-Z]{3}|[a-z]{3})[0-9]{3}|[A-Z]{2}[0-9]{3}[A-Z]{2}" required [maxLength]="191" placeholder="Ej: AAA123">\r\n                        <span *ngIf="patente.valid" class="form-control-feedback"></span>\r\n                        <span *ngIf="patente.errors !== null && (!patente.pristine || patente.touched || submitted)" class="form-control-feedback"></span>\r\n                        <div *ngIf="!patente.valid && (!patente.pristine || patente.touched || submitted)" class="has-danger form-control-feedback"> *Ingrese la patente</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="modal-footer custom-modal-footer">\r\n            <button type="button" class="btn btn-info custom-btn" data-dismiss="modal">Cancelar</button>\r\n            <button type="submit" (click)="onSubmitClicked(f)" class="btn btn-primary custom-btn">ACEPTAR</button>\r\n        </div>\r\n\r\n    </form>\r\n\r\n    <div class="card mb-3" *ngIf="submittedExitoso">\r\n        <div class="card-header custom-card-header-main">Datos de la transacción</div>\r\n        <div class="card-block">\r\n            <div class="form-group row">\r\n                <label for="patent" class="col-sm-3 required control-label text-center">Patente</label>\r\n                <div class="col-sm-9">\r\n                    <input class="form-control has-feedback" id="patent" name="patent" [(ngModel)]="this.egreso.nroPatente"\r\n                           #patent="ngModel" placeholder="Patente">\r\n                </div>\r\n            </div>\r\n\r\n            <div class="form-group row">\r\n                <label for="tmingreso" class="col-sm-3 required control-label text-center">Hora ingreso</label>\r\n                <div class="col-sm-9">\r\n                    <input class="form-control has-feedback" id="tmingreso" name="tmingreso" [(ngModel)]="this.egreso.horaIngresoVehiculo"\r\n                           #tmingreso="ngModel" placeholder="Ingreso">\r\n                </div>\r\n            </div>\r\n\r\n            <div class="form-group row">\r\n                <label for="tmegreso" class="col-sm-3 required control-label text-center">Hora egreso</label>\r\n                <div class="col-sm-9">\r\n                    <input class="form-control has-feedback" id="tmegreso" name="tmegreso" [(ngModel)]="this.egreso.horaEgresoVehiculo"\r\n                           #tmegreso="ngModel" placeholder="Egreso">\r\n                </div>\r\n            </div>\r\n\r\n            <div class="form-group row">\r\n                <label for="tmtotal" class="col-sm-3 required control-label text-center">Tiempo estadía</label>\r\n                <div class="col-sm-9">\r\n                    <input class="form-control has-feedback" id="tmtotal" name="tmtotal" [(ngModel)]="this.egreso.tiempoPermanencia"\r\n                           #tmtotal="ngModel" placeholder="Tiempo estadía">\r\n                </div>\r\n            </div>\r\n\r\n            <div class="form-group row">\r\n                <label for="monto" class="col-sm-3 required control-label text-center">Monto</label>\r\n                <div class="col-sm-9">\r\n                    <input class="form-control has-feedback" id="monto" name="monto" [(ngModel)]="\'$\' + this.egreso.costoPermanencia"\r\n                           #monto="ngModel" placeholder="Monto">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n'}});