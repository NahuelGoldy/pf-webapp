webpackJsonp([2],{"9Ks4":function(e,t){e.exports='<div [@routerTransition]>\r\n    <div class="row">\r\n        <div class="col-xs-12 col-lg-12">\r\n            <ngb-carousel>\r\n                <ng-template ngbSlide *ngFor="let slider of sliders">\r\n                    <img class="img-fluid mx-auto d-block" [src]="slider.imagePath" alt="First slide" width="100%">\r\n                    <div class="carousel-caption">\r\n                        <h3>{{slider.label}}</h3>\r\n                    </div>\r\n                </ng-template>\r\n            </ngb-carousel>\r\n        </div>\r\n    </div>\r\n    <hr>\r\n    <div class="row">\r\n        \x3c!-- TODO cambiar links /login a donde corresponda --\x3e\r\n        <a class="col-xs-6 col-lg-3 dashboard-item" [routerLink]="[\'/ingreso-egreso/ingreso\']">\r\n            <app-stat [bgClass]="\'card-success\'"\r\n                      [icon2]="\'fa-car\'" [icon]="\'fa-sign-in\'"\r\n                      [data]="\'INGRESO VEHÍCULO\'"></app-stat>\r\n        </a>\r\n        <a class="col-xs-6 col-lg-3 dashboard-item" [routerLink]="[\'/ingreso-egreso/egreso\']">\r\n            <app-stat [bgClass]="\'card-danger\'"\r\n                      [icon]="\'fa-car\'" [icon2]="\'fa-sign-out\'"\r\n                      [data]="\'SALIDA VEHÍCULO\'"></app-stat>\r\n        </a>\r\n        <a class="col-xs-6 col-lg-3 dashboard-item" [routerLink]="[\'/reservas/activas\']">\r\n            <app-stat [bgClass]="\'card-primary\'"\r\n                      [icon]="\'fa-money\'" [count]="4" [label]="\'nuevas reservas!\'"\r\n                      [data]="\'VER RESERVAS\'" ></app-stat>\r\n        </a>\r\n        <a class="col-xs-6 col-lg-3 dashboard-item" [routerLink]="[\'/reportes/reporte-ingresos\']">\r\n            <app-stat [bgClass]="\'card-info\'" [icon]="\'fa-bar-chart\'"\r\n                      [count]="21" [label]="\'vehículos ingresados\'"\r\n                      [data]="\'ESTADÍSTICAS\'" ></app-stat>\r\n        </a>\r\n    </div>\r\n    <hr />\r\n\r\n    <div class="row">\r\n        <div class="col-lg-6">\r\n            <app-chart></app-chart>\r\n        </div>\r\n        <div class="col-lg-6 notif-div">\r\n            <div class="card card-default">\r\n                <div class="card-header card-primary">\r\n                    <i class="fa fa-bell fa-fw"></i> Notificaciones\r\n                </div>\r\n                <app-notification></app-notification>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="row">\r\n        <div class="col-xs-4 col-lg-4">\r\n            <div class="card card-default dashboard-table">\r\n                <div class="card-header card-success">\r\n                    <i class="fa fa-sign-in fa-car"></i> Últimos ingresos\r\n                </div>\r\n                <div *ngIf="ocultarTablaUltIngresos" class="text-center spinner-dashboard-tables">\r\n                    <i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>\r\n                </div>\r\n                <table *ngIf="!ocultarTablaUltIngresos" class="table table-bordered table-striped">\r\n                    <thead>\r\n                        <tr>\r\n                            <th style="text-align: center;">#</th>\r\n                            <th style="text-align: center; font-size: 0.9em;">Patente</th>\r\n                            <th style="text-align: center; font-size: 0.9em;">Hora ingreso</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngFor="let ingreso of ultimosIngresos; let i = index" style="text-align: center;">\r\n                            <th scope="row">{{ultimosIngresos.length - i}}</th>\r\n                            <td>{{ingreso.vehiculoEstacionado.patente}}</td>\r\n                            <td>{{ingreso.fechaIngreso}}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="col-xs-4 col-lg-4">\r\n            <div class="card card-default dashboard-table">\r\n                <div class="card-header card-danger">\r\n                    <i class="fa fa-dollar"></i> Últimos egresos\r\n                </div>\r\n                <div *ngIf="ocultarTablaUltEgresos" class="text-center spinner-dashboard-tables">\r\n                    <i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>\r\n                </div>\r\n                <table *ngIf="!ocultarTablaUltEgresos" class="table table-bordered table-striped">\r\n                    <thead>\r\n                    <tr>\r\n                        <th style="text-align: center;">#</th>\r\n                        <th style="text-align: center; font-size: 0.9em;">Patente</th>\r\n                        <th style="text-align: center; font-size: 0.9em;">Tiempo estadía</th>\r\n                        <th style="text-align: center; font-size: 0.9em;">Monto</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngFor="let egreso of ultimosEgresos; let i = index" style="text-align: center;">\r\n                            <td>{{ultimosEgresos.length - i}}</td>\r\n                            <td>{{egreso.nroPatente}}</td>\r\n                            <td>{{egreso.tiempoPermanencia}}</td>\r\n                            <td>${{egreso.costoPermanencia}}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="col-lg-4 col-lg-4">\r\n            <div class="card card-default dashboard-table">\r\n                <div class="card-header card-info">\r\n                    <i class="fa fa-info-circle"></i> Información general\r\n                </div>\r\n                <div class="card-block">\r\n                    <div *ngIf="ocultarTablaUltIngresos" class="text-center spinner-dashboard-tables">\r\n                        <i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>\r\n                    </div>\r\n                    <table *ngIf="!ocultarTablaUltIngresos" class="table table-sm">\r\n                        <tbody>\r\n                            <tr>\r\n                                <td>Vehículos ahora: <span class="stats-content">{{ingresadosActivos}}</span></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>Capacidad: <span class="stats-content">{{(ingresadosActivos / parque.capacidad) * 100}}%</span></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>Reservas activas: <span class="stats-content">3</span></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>Ultimo ingreso: <span class="stats-content">{{ultimosIngresos[0].fechaIngreso.slice(10, ultimosIngresos[0].fechaIngreso.length)}}</span></td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},Funm:function(e,t,r){t=e.exports=r("rP7Y")(!1),t.push([e.i,".card .custom-card-header-main{font-weight:700}",""]),e.exports=e.exports.toString()},SFx4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("/oeL"),n=r("qbdv"),s=r("0WLp"),o=r("XL72"),i=r("TKqQ"),c=r("y5XU"),l=r("gOac"),d=r("UhLR");r.n(d);r.d(t,"DashboardModule",function(){return h});var f=this&&this.__decorate||function(e,t,r,a){var n,s=arguments.length,o=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},h=function(){function e(){}return e}();h=f([r.i(a.NgModule)({imports:[n.k,s.e.forRoot(),s.b.forRoot(),o.a,l.c,d.ChartsModule],declarations:[i.a,c.a,c.b]})],h)},TKqQ:function(e,t,r){"use strict";var a=r("/oeL"),n=r("5O89"),s=r("K28T"),o=r("n8TV"),i=r("N+n4");r.n(i);r.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,r,a){var n,s=arguments.length,o=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e){var t=this;this.apiService=e,this.sliders=[],this.ultimosIngresos=[],this.ultimosEgresosTemp=[],this.ultimosEgresos=[],this.ocultarTablaUltIngresos=!0,this.ocultarTablaUltEgresos=!0,this.ingresadosActivos=0,this.sliders.push({imagePath:"assets/images/parking-banner1.jpg",label:"Revoluciona tu negocio"},{imagePath:"assets/images/parking-banner2.jpg",label:"Potencia tus clientes"},{imagePath:"assets/images/parking-banner3.jpg",label:"Incrementa tus ganancias!"});var r=JSON.parse(localStorage.getItem("currentParking")).idEstacionamiento;this.apiService.get("ingreso/"+r).subscribe(function(e){e.reverse(),e.forEach(function(e){e.marcoSalidaDelParque?t.ultimosEgresosTemp.push(e):(t.ultimosIngresos.push(e),t.ingresadosActivos++)}),t.ultimosIngresos.length>5&&t.ultimosIngresos.splice(5,t.ultimosIngresos.length-5),t.ocultarTablaUltIngresos=!1,t.procesarEgresos(),t.ultimosEgresos.length>5&&t.ultimosEgresos.splice(5,t.ultimosEgresos.length-5),t.ocultarTablaUltEgresos=!1}),this.parque=JSON.parse(localStorage.getItem("currentParking"))}return e.prototype.ngOnInit=function(){},e.prototype.procesarEgresos=function(){var e=this;this.ultimosEgresosTemp.forEach(function(t){var a=new o.a;a.nroPatente=t.vehiculoEstacionado.patente,r.i(i.isNullOrUndefined)(t.vehiculoEstacionado.ownerVehiculo)?(a.apellidoCliente="",a.nombreCliente=""):(a.apellidoCliente=t.vehiculoEstacionado.ownerVehiculo.apellido,a.nombreCliente=t.vehiculoEstacionado.ownerVehiculo.nombre),a.horaIngresoVehiculo=t.fechaIngreso,a.horaEgresoVehiculo=t.fechaEgreso;var n=e.calcularCantHoras(t);a.tiempoPermanencia=n+"hs",a.costoPermanencia=e.calcularCosto(n),e.ultimosEgresos.push(a)})},e.prototype.calcularCantHoras=function(e){var t=e.fechaIngreso.replace("-/g","/"),r=e.fechaEgreso.replace("-/g","/");return Math.ceil((new Date(r).getTime()-new Date(t).getTime())/36e5)},e.prototype.calcularCosto=function(e){return e*this.parque.precioPorHora},e}();d=c([r.i(a.Component)({selector:"app-dashboard",template:r("9Ks4"),styles:[r("b+U9")],animations:[r.i(n.a)()]}),l("design:paramtypes",["function"==typeof(f=void 0!==s.a&&s.a)&&f||Object])],d);var f},Wqpz:function(e,t,r){"use strict";var a=r("/oeL"),n=r("K28T"),s=r("/lGx");r.d(t,"a",function(){return c});var o=this&&this.__decorate||function(e,t,r,a){var n,s=arguments.length,o=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e){var t=this;this.apiService=e,this.ingresos=[],this.data=new Map,this.doughnutChartLabels=["Pago electrónico","Reserva","Usuario no registrado"],this.doughnutChartData=[350,450,100],this.doughnutChartType="doughnut",this.lineChartData=[{data:[],label:"Ingresos"}],this.chartLabels=["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"],this.lineChartLabels=[],this.lineChartOptions={scales:{yAxes:[{ticks:{beginAtZero:!0}}]},responsive:!0},this.lineChartColors=[{backgroundColor:"rgba(77,83,96,0.2)",borderColor:"rgba(77,83,96,1)",pointBackgroundColor:"rgba(77,83,96,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(77,83,96,1)"}],this.lineChartLegend=!0,this.lineChartType="line";var r=new Date,a=new Date(r.getTime()+864e5),n=new Date(r.getTime()-864e5),o=new s.a,i=JSON.parse(localStorage.getItem("currentParking")),c=("0"+a.getDate()).slice(-2)+"/"+("0"+(a.getMonth()+1)).slice(-2)+"/"+a.getFullYear()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds(),l=("0"+n.getDate()).slice(-2)+"/"+("0"+(n.getMonth()+1)).slice(-2)+"/"+n.getFullYear()+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds();o.fechaFinal=c,o.fechaInicial=l,o.idEstacionamiento=i.idEstacionamiento,this.apiService.post("ingreso/ingresoVehiculo/allByFechas",o).subscribe(function(e){t.ingresos=e,t.poblarMapIngresos()})}return e.prototype.chartClicked=function(e){},e.prototype.chartHovered=function(e){},e.prototype.ngOnInit=function(){var e=this,t=("0"+((new Date).getHours()-(new Date).getHours()%3)).slice(-2)+":00",r=[],a=[];this.chartLabels.forEach(function(e){switch(e.localeCompare(t)){case-1:r.push(e);break;case 1:a.push(e)}}),a.forEach(function(t){e.lineChartLabels.push(t),e.data.set(t,0)}),r.forEach(function(t){e.lineChartLabels.push(t),e.data.set(t,0)}),this.lineChartLabels.push(t),this.data.set(t,0)},e.prototype.poblarMapIngresos=function(){var e=this;this.ingresos.forEach(function(t){var r=+t.fechaIngreso.slice(11,13)-+t.fechaIngreso.slice(11,13)%3,a=("0"+r).slice(-2)+":00";e.data.set(a,e.data.get(a)+1)});var t=[];this.data.forEach(function(e,r){t.push(e)}),this.lineChartData=[{data:t,label:"Ingresos"}]},e}();c=o([r.i(a.Component)({selector:"app-chart",template:r("kr2A"),styles:[r("Funm")]}),i("design:paramtypes",["function"==typeof(l=void 0!==n.a&&n.a)&&l||Object])],c);var l},XL72:function(e,t,r){"use strict";var a=r("/oeL"),n=r("BkNc"),s=r("TKqQ");r.d(t,"a",function(){return c});var o=this&&this.__decorate||function(e,t,r,a){var n,s=arguments.length,o=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},i=[{path:"",component:s.a}],c=function(){function e(){}return e}();c=o([r.i(a.NgModule)({imports:[n.a.forChild(i)],exports:[n.a]})],c)},"b+U9":function(e,t,r){t=e.exports=r("rP7Y")(!1),t.push([e.i,".notif-div{display:inline-block;height:100%;vertical-align:middle}.spinner-dashboard-tables{padding:10%}.stats-content{float:right;font-weight:700}.card-danger,.card-info,.card-primary,.card-success{color:#fff;font-weight:700}.dashboard-item{padding:1%}.dashboard-table{margin:1%}",""]),e.exports=e.exports.toString()},kZm2:function(e,t,r){"use strict";var a=r("/oeL");r.d(t,"a",function(){return o});var n=this&&this.__decorate||function(e,t,r,a){var n,s=arguments.length,o=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();o=n([r.i(a.Component)({selector:"app-notification",template:r("rYux"),styles:[r("nmsg")]}),s("design:paramtypes",[])],o)},kr2A:function(e,t){e.exports='<div>\r\n    <div class="card mb-3">\r\n        <div class="card-header custom-card-header-main">\r\n            <i class="fa fa-line-chart  fa-fw"></i> Ingresos al Parque (últimas 24hs)\r\n        </div>\r\n        <div class="card-block">\r\n            <canvas baseChart height="127" [datasets]="lineChartData"\r\n                    [labels]="lineChartLabels" [options]="lineChartOptions"\r\n                    [colors]="lineChartColors" [legend]="lineChartLegend"\r\n                    [chartType]="lineChartType" (chartHover)="chartHovered($event)"\r\n                    (chartClick)="chartClicked($event)">\r\n            </canvas>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\x3c!--ESTE ES UN GRAFICO TIPO ANILLO (CON COLORES)--\x3e\r\n\x3c!--<div>--\x3e\r\n    \x3c!--<div class="card mb-3">--\x3e\r\n        \x3c!--<div class="card-header">--\x3e\r\n            \x3c!--Doughnut Chart--\x3e\r\n        \x3c!--</div>--\x3e\r\n        \x3c!--<div class="card-block">--\x3e\r\n            \x3c!--<canvas baseChart height="180px" [data]="doughnutChartData" [labels]="doughnutChartLabels" [chartType]="doughnutChartType" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)">--\x3e\r\n            \x3c!--</canvas>--\x3e\r\n        \x3c!--</div>--\x3e\r\n    \x3c!--</div>--\x3e\r\n\x3c!--</div>--\x3e\r\n'},nmsg:function(e,t,r){t=e.exports=r("rP7Y")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},rYux:function(e,t){e.exports='\r\n    <div class="list-group">\r\n        <a href="#" class="list-group-item clearfix d-block">\r\n            <i class="fa fa-car fa-fw"></i> Nuevo ingreso de vehículo\r\n            <span class="float-right text-muted small"><em>hace 4 minutos</em></span>\r\n        </a>\r\n        <a href="#" class="list-group-item clearfix d-block">\r\n            <i class="fa fa-mobile fa-fw"></i> Solicitud de reserva\r\n            <span class="float-right text-muted small"><em>hace 15 minutos</em></span>\r\n        </a>\r\n        <a href="#" class="list-group-item clearfix d-block">\r\n            <i class="fa fa-dollar fa-fw"></i> Nuevo egreso de vehículo\r\n            <span class="float-right text-muted small"><em>hace 21 minutos</em></span>\r\n        </a>\r\n        <a href="#" class="list-group-item clearfix d-block">\r\n            <i class="fa fa-car fa-fw"></i> Nuevo ingreso de vehículo\r\n            <span class="float-right text-muted small"><em>hace 43 minutos</em></span>\r\n        </a>\r\n        <a href="#" class="list-group-item clearfix d-block">\r\n            <i class="fa fa-comments fa-fw"></i> Un usuario ha evaluado tu Parque!\r\n            <span class="float-right text-muted small"><em>11:32 AM</em></span>\r\n        </a>\r\n    </div>\r\n'},y5XU:function(e,t,r){"use strict";var a=r("kZm2");r.d(t,"a",function(){return a.a});var n=r("Wqpz");r.d(t,"b",function(){return n.a})}});